<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Unit Converter</title>

    <!-- Bootstrap 5 CSS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>

    <!-- jQuery 3.6 -->
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>

    <!-- Bootstrap 5 JS Bundle -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
    <style>
      body {
        background-color: #0052a5;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <form
        method="get"
        id="convertForm"
        class="mt-5 p-4 rounded shadow bg-white col-md-6 col-lg-5 mx-auto"
      >
        <h1 class="text-center text-primary mb-4">Unit Converter</h1>

        <div class="mb-3">
          <label class="mb-2 d-block">Category:</label>
          <div class="btn-group w-100" role="group" aria-label="Category">
            <input
              type="radio"
              class="btn-check"
              name="category"
              id="length"
              value="length"
              autocomplete="off"
              checked
            />
            <label class="btn btn-outline-primary" for="length">Length</label>

            <input
              type="radio"
              class="btn-check"
              name="category"
              id="weight"
              value="weight"
              autocomplete="off"
            />
            <label class="btn btn-outline-primary" for="weight">Weight</label>

            <input
              type="radio"
              class="btn-check"
              name="category"
              id="temperature"
              value="temperature"
              autocomplete="off"
            />
            <label class="btn btn-outline-primary" for="temperature"
              >Temperature</label
            >
          </div>
        </div>

        <div class="mb-3">
          <label for="value" class="mb-2">Enter the value:</label>
          <input
            type="number"
            id="value"
            name="value"
            class="form-control"
            required
            autocomplete="off"
          />
        </div>

        <div class="row mb-3">
          <div class="col-6">
            <label for="from_unit" class="mb-2">From:</label>
            <select
              id="from_unit"
              name="from_unit"
              class="form-select"
              required
            ></select>
          </div>
          <div class="col-6">
            <label for="to_unit" class="mb-2">To:</label>
            <select
              id="to_unit"
              name="to_unit"
              class="form-select"
              required
            ></select>
          </div>
        </div>

        <div class="text-center">
          <button type="submit" id="convertButton" class="btn btn-success px-5">
            Convert
          </button>
        </div>
      </form>
    </div>

    <div class="container mt-3 col-md-6 col-lg-5 mx-auto bg-light rounded">
      <h2 class="text-center text-success" id="result"></h2>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const categoryRadios = document.getElementsByName("category");
        const fromUnitSelect = document.getElementById("from_unit");
        const toUnitSelect = document.getElementById("to_unit");

        const units = {
          length: [
            "meters",
            "kilometers",
            "miles",
            "feet",
            "centimeters",
            "inches",
          ],
          weight: ["grams", "kilograms", "pounds", "ounces", "stones", "tons"],
          temperature: ["Celsius", "Fahrenheit", "Kelvin", "Rankine"],
        };

        function updateUnits() {
          const selectedCategory = Array.from(categoryRadios).find(
            (radio) => radio.checked
          ).value;

          fromUnitSelect.innerHTML = "";
          toUnitSelect.innerHTML = "";

          units[selectedCategory].forEach((unit) => {
            const optionFrom = document.createElement("option");
            optionFrom.value = unit;
            optionFrom.textContent =
              unit.charAt(0).toUpperCase() + unit.slice(1);
            fromUnitSelect.appendChild(optionFrom);

            const optionTo = document.createElement("option");
            optionTo.value = unit;
            optionTo.textContent = unit.charAt(0).toUpperCase() + unit.slice(1);
            toUnitSelect.appendChild(optionTo);
          });
        }

        categoryRadios.forEach((radio) => {
          radio.addEventListener("change", updateUnits);
        });

        updateUnits();
      });

      $(document).ready(function () {
        $("#convertForm").submit(function (event) {
          event.preventDefault();
          const formData = $(this).serialize();

          $.ajax({
            url: "http://localhost:8000/convert",
            type: "GET",
            data: formData,
            success: function (response) {
              $("#result").text(
                `Result: ${response.convertedValue} ${response.to_unit}`
              );
            },
            error: function (error) {
              console.error("Error:", error);
            },
          });
        });
      });
    </script>
  </body>
</html>
